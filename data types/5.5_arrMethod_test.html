<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //#1.
        // Переведите текст вида border - left - width в borderLeftWidth
        // Напишите функцию camelize(str), которая преобразует строки вида 
        // «my - short - string» в «myShortString».
        // То есть дефисы удаляются, а все слова после них получают заглавную букву.
        //P.S. Подсказка: используйте split, чтобы разбить строку на массив символов, 
        //потом переделайте всё как нужно и методом join соедините обратно.
        let str = "border  - left - width";
        function camelize(str) {
            return str
                .split("-")
                .map((word, index) => index == 0 ? word : word[0].toUpperCase() + word.slice(1))
                .join('');
        };
        //#2.
        //Напишите функцию filterRange(arr, a, b), которая принимает массив arr,
        //ищет элементы со значениями больше или равными a и меньше или равными b и возвращает результат в виде массива.
        //Функция должна возвращать новый массив и не изменять исходный.
        function filterRange(arr, a, b) {
            return arr.filter(el => el <= a && el <= b)
        };
        let arr = [5, 3, 8, 1];
        let filtered = filterRange(arr, 1, 4);
        alert(filtered);
        alert(arr);

        //#3.
        //Напишите функцию filterRangeInPlace(arr, a, b),
        //которая принимает массив arr и удаляет из него все значения кроме тех,
        // которые находятся между a и b. То есть, проверка имеет вид a ≤ arr[i] ≤ b.
        //Функция должна изменять принимаемый массив и ничего не возвращать.
        function filterRangeInPlace(arr, a, b) {
            for (let i = 0; i < arr.lenght; i++) {
                let value = arr[i];
                if (value < a || value > b) {
                    arr.splice(i, 1);
                    i--;
                }
            }
        };

        //#4.
        //Сортировать в порядке по убыванию
        let arr2 = [5, 2, 1, -10, 8];
        arr2.sort((a, b) => b - a)
        alert(arr2);

        //#5.Скопировать и отсортировать массив
        //У нас есть массив строк arr. Нужно получить отсортированную копию,
        //но оставить arr неизменённым.
        //Создайте функцию copySorted(arr), которая будет возвращать такую копию.
        let arr3 = ["HTML", "JavaScript", "CSS"];
        function copySorted(arr3) {
            return arr3.slice().sort();
        }
        let sortArr = copySorted(arr3);
        alert(sortArr);

        //#6. Создать расширяемый калькулятор
        //Создайте функцию конструктор Calculator, которая создаёт «расширяемые» объекты калькулятора.
        //6.1_Во-первых, реализуйте метод calculate(str), который принимает строку типа "1 + 2" в формате
        // «ЧИСЛО оператор ЧИСЛО» (разделено пробелами) и возвращает результат.
        // Метод должен понимать плюс + и минус -.

        //6.2_Затем добавьте метод addMethod(name, func), который добавляет в калькулятор новые операции.
        //Он принимает оператор name и функцию с двумя аргументами func(a,b), которая описывает его.
        //Для этой задачи не нужны скобки или сложные выражения.
        // Числа и оператор разделены ровно одним пробелом.
        // Не лишним будет добавить обработку ошибок.
        function Calculator() {
            this.methods = {
                "-": (a, b) => (a - b),
                "+": (a, b) => (a + b),
            };
            this.calculater = function (str) {
                let splitStr = str.split(' '),
                    a = +splitStr[0],
                    op = +splitStr[1],
                    b = +splitStr[2]
                if (!this.methods[op] || isNaN(a) || isNaN(b)) {
                    return NaN;
                }
                return this.methods[op](a, b);
            }
            this.addMethod = function (name, func) {
                this.methods[name] = func;
            };
        }
        //#7. Трансформировать в массив имён
        //У вас есть массив объектов user, и в каждом из них есть user.name.
        //Напишите код, который преобразует их в массив имён.
        // Например:
        let vasya = { name: "Вася", age: 25 };
        let petya = { name: "Петя", age: 30 };
        let masha = { name: "Маша", age: 28 };
        let users = [vasya, petya, masha];
        //  let names = /* ... ваш код */
        // alert(names); // Вася, Петя, Маша;

        //Ответ:
        let names = users.map(item => item.name);
        alert(names)

        //8.Трансформировать в объекты

        // У вас есть массив объектов user, и у каждого из объектов есть name, surname и id.
        // Напишите код, который создаст ещё один массив объектов с параметрами id и fullName,
        //  где fullName – состоит из name и surname.
        // Например:
        // let vasya = { name: "Вася", surname: "Пупкин", id: 1 };
        // let petya = { name: "Петя", surname: "Иванов", id: 2 };
        // let masha = { name: "Маша", surname: "Петрова", id: 3 };
        // let users = [ vasya, petya, masha ];
        //let usersMapped = /* ... ваш код ... */
        /*
        usersMapped = [
          { fullName: "Вася Пупкин", id: 1 },
          { fullName: "Петя Иванов", id: 2 },
          { fullName: "Маша Петрова", id: 3 }
        ]
        */
        //alert( usersMapped[0].id ) // 1
        //alert( usersMapped[0].fullName ) // Вася Пупкин

        //Ответ:
        let katya = { name: "Катя", surname: "Пупкин", id: 1 };
        let nadia = { name: "Надя", surname: "Иванов", id: 2 };
        let olga = { name: "Оля", surname: "Петрова", id: 3 };
        let people = [katya, nadia, olga];
        let usersMapped = people.map(item => ({
            fullName: `${item.name} ${item.surname}`,
            id: item.id,
        }));
        alert(usersMapped[0].id) // 1
        alert(usersMapped[0].fullName)

        //#9._Отсортировать пользователей по возрасту;
        // Напишите функцию sortByAge(users),
        // которая принимает массив объектов со свойством age и сортирует их по нему.
        let Lena = { name: "Лена", age: 25 };
        let Iliy = { name: "Илья", age: 30 };
        let Ivan = { name: "Иван", age: 28 };
        let arr5 = [Lena, Iliy, Ivan];
        function sortByAge(arr5) {
            arr5.sort((a, b) => a.age > b.age ? 1 : -1)
        };
        sortByAge(arr5)
        alert(arr5[0].name);
        alert(arr5[1].name);
        alert(arr5[2].name);

        //10._Напишите функцию shuffle(array), 
        //которая перемешивает (переупорядочивает случайным образом) элементы массива.
        let arr6 = [1, 2, 3];
        function shuffle(array) {
            array.sort(() => Math.random() - 0.5);
        }
        shuffle(arr6)
        alert(arr6)
        //11._Получить средний возраст
        //Напишите функцию getAverageAge(users), которая принимает массив объектов
        //со свойством age и возвращает средний возраст.
        //Формула вычисления среднего арифметического значения: (age1 + age2 + ... + ageN) / N.

        function getAverageAge(users) {
            return users.reduce((prev, user) => prev + user.age, 0) / users.length;
        }
        let vasya1 = { name: "Вася", age: 25 };
        let petya1 = { name: "Петя", age: 30 };
        let masha1 = { name: "Маша", age: 29 };
        let arr12 = [vasya1, petya1, masha1];
        console.log(getAverageAge(arr12));

        //12._Оставить уникальные элементы массива
        //Пусть arr – массив строк.
        // Напишите функцию unique(arr), которая возвращает массив,
        // содержащий только уникальные элементы arr.
        function unique(arr) {
            let result = [];
            for (let el of arr) {
                if (!result.includes(el)) {
                    result.push(el)
                }
            }
            return result;
        }
        let strings = ["кришна", "кришна", "харе", "харе",
            "харе", "харе", "кришна", "кришна", ":-O"
        ];
        console.log(unique(strings)); // кришна, харе, :-O

        //#13._Создайте объект с ключами из массива
        //Допустим, мы получили массив пользователей в виде {id:..., name:..., age:... }.
        // Создайте функцию groupById(arr), 
        // которая создаст из него объект с id в качестве ключа
        //  и элементами массива в качестве значений.
        let usersArr = [
            { id: 'john', name: "John Smith", age: 20 },
            { id: 'ann', name: "Ann Smith", age: 24 },
            { id: 'pete', name: "Pete Peterson", age: 31 },
        ];
        function groupById(array) {
            return array.reduce((obj, value) => {
                obj[value.id] = value;
                return obj;
            }, {})
        }
        console.log(groupById(usersArr));
    </script>
</body>

</html>